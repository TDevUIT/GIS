<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ArcGIS JavaScript - Sân bay Tân Sơn Nhất</title>
    <style>
        html,
        body,
        #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.26/"></script>

    <script>
        // Popup templates
        var templatePopup = {
            title: "{Name}",
            content: "{Description}"
        };

        // Data
        var jsondata = {
            "points": [
                {
                    type: "point",
                    longitude: 106.6521,
                    latitude: 10.8188,
                    Name: "Sân bay Quốc tế Tân Sơn Nhất",
                    Description: `
                        <p><strong>Địa chỉ:</strong> Sân bay Quốc tế Tân Sơn Nhất, Phường 2, Quận Tân Bình, Thành phố Hồ Chí Minh, Việt Nam.</p>
                        <p><strong>Giới thiệu:</strong> Sân bay Quốc tế Tân Sơn Nhất (IATA: SGN, ICAO: VVTS) là cảng hàng không lớn nhất Việt Nam về công suất nhà ga và lưu lượng hành khách. Sân bay nằm cách trung tâm Thành phố Hồ Chí Minh khoảng 6 km về phía Bắc, đóng vai trò là cửa ngõ hàng không quan trọng của khu vực phía Nam.</p>
                        <p>Khu vực sân bay bao gồm nhà ga quốc nội, nhà ga quốc tế, các khu vực dịch vụ, bãi đỗ máy bay, đường băng và nhiều tiện ích hiện đại phục vụ hàng triệu lượt khách mỗi năm. Đây là trung tâm hoạt động của nhiều hãng hàng không lớn trong nước và quốc tế.</p>
				    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://static.arcgis.com/images/Symbols/Transportation/Airplane.png",
                        width: "48px",
                        height: "48px"
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "point",
                    longitude: 106.674272,
                    latitude: 10.812432,
                    Name: "Công viên Gia Định",
                    Description: `
                        <p><strong>Địa chỉ:</strong> Công viên Gia Định, Quận Gò Vấp, TP.HCM.</p>
                        <p><strong>Giới thiệu:</strong> Công viên lớn với nhiều cây xanh, khu vui chơi và tiện ích cộng đồng.</p>
                    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://cdn.arcgis.com/sharing/rest/content/items/738c8d0e43464829bc816185f11eb954/resources/styles/thumbnails/Park_POI-Large_3.png",
                        width: "58px",
                        height: "58px"
                    },
                    popupTemplate: templatePopup
                }
            ],
            "polygons": [
                {
                    type: "polygon",
                    rings: [
                        // [106.6479, 10.8150],
                        // [106.6630, 10.8225],
                        // [106.6695, 10.8180],
                        // [106.6535, 10.8110],
                        // [106.6479, 10.8150]
                        [
                            106.661873,
                            10.831288
                        ],
                        [
                            106.66186,
                            10.831234
                        ],
                        [
                            106.661752,
                            10.831245
                        ],
                        [
                            106.661668,
                            10.831254
                        ],
                        [
                            106.661594,
                            10.831261
                        ],
                        [
                            106.661513,
                            10.831269
                        ],
                        [
                            106.661419,
                            10.831279
                        ],
                        [
                            106.661324,
                            10.831289
                        ],
                        [
                            106.66123,
                            10.831297
                        ],
                        [
                            106.661156,
                            10.831303
                        ],
                        [
                            106.661073,
                            10.83131
                        ],
                        [
                            106.660996,
                            10.831317
                        ],
                        [
                            106.660908,
                            10.831324
                        ],
                        [
                            106.660824,
                            10.831331
                        ],
                        [
                            106.660768,
                            10.831335
                        ],
                        [
                            106.660725,
                            10.831339
                        ],
                        [
                            106.660673,
                            10.831344
                        ],
                        [
                            106.660614,
                            10.831345
                        ],
                        [
                            106.660547,
                            10.831348
                        ],
                        [
                            106.660526,
                            10.831349
                        ],
                        [
                            106.660488,
                            10.831353
                        ],
                        [
                            106.660421,
                            10.831359
                        ],
                        [
                            106.660381,
                            10.831363
                        ],
                        [
                            106.660374,
                            10.831364
                        ],
                        [
                            106.660349,
                            10.831325
                        ],
                        [
                            106.660332,
                            10.831297
                        ],
                        [
                            106.66031,
                            10.831262
                        ],
                        [
                            106.660294,
                            10.831236
                        ],
                        [
                            106.660256,
                            10.831174
                        ],
                        [
                            106.660242,
                            10.831152
                        ],
                        [
                            106.660221,
                            10.831118
                        ],
                        [
                            106.660192,
                            10.83107
                        ],
                        [
                            106.660149,
                            10.831001
                        ],
                        [
                            106.660124,
                            10.83095
                        ],
                        [
                            106.660103,
                            10.830906
                        ],
                        [
                            106.660083,
                            10.830865
                        ],
                        [
                            106.660044,
                            10.830788
                        ],
                        [
                            106.660028,
                            10.830744
                        ],
                        [
                            106.659925,
                            10.830481
                        ],
                        [
                            106.659765,
                            10.830098
                        ],
                        [
                            106.65969,
                            10.829984
                        ],
                        [
                            106.659653,
                            10.829966
                        ],
                        [
                            106.65953,
                            10.829968
                        ],
                        [
                            106.659376,
                            10.829999
                        ],
                        [
                            106.659334,
                            10.830004
                        ],
                        [
                            106.659214,
                            10.830018
                        ],
                        [
                            106.659013,
                            10.830041
                        ],
                        [
                            106.658942,
                            10.829979
                        ],
                        [
                            106.658895,
                            10.829964
                        ],
                        [
                            106.658678,
                            10.82997
                        ],
                        [
                            106.658368,
                            10.829979
                        ],
                        [
                            106.6584,
                            10.829927
                        ],
                        [
                            106.658401,
                            10.829925
                        ],
                        [
                            106.658328,
                            10.829917
                        ],
                        [
                            106.658325,
                            10.829916
                        ],
                        [
                            106.658203,
                            10.829848
                        ],
                        [
                            106.658199,
                            10.829774
                        ],
                        [
                            106.658196,
                            10.82971
                        ],
                        [
                            106.658192,
                            10.829645
                        ],
                        [
                            106.658187,
                            10.82956
                        ],
                        [
                            106.658186,
                            10.82953
                        ],
                        [
                            106.658183,
                            10.829485
                        ],
                        [
                            106.658181,
                            10.829445
                        ],
                        [
                            106.658179,
                            10.829411
                        ],
                        [
                            106.658169,
                            10.829225
                        ],
                        [
                            106.658148,
                            10.828855
                        ],
                        [
                            106.658111,
                            10.828176
                        ],
                        [
                            106.658084,
                            10.827807
                        ],
                        [
                            106.658081,
                            10.827653
                        ],
                        [
                            106.658067,
                            10.827624
                        ],
                        [
                            106.658051,
                            10.827453
                        ],
                        [
                            106.658038,
                            10.827312
                        ],
                        [
                            106.658024,
                            10.827169
                        ],
                        [
                            106.657997,
                            10.826878
                        ],
                        [
                            106.657979,
                            10.826684
                        ],
                        [
                            106.657964,
                            10.826512
                        ],
                        [
                            106.657876,
                            10.825436
                        ],
                        [
                            106.657705,
                            10.825195
                        ],
                        [
                            106.645166,
                            10.820497
                        ],
                        [
                            106.644825,
                            10.820472
                        ],
                        [
                            106.644802,
                            10.820394
                        ],
                        [
                            106.644688,
                            10.820335
                        ],
                        [
                            106.644615,
                            10.820177
                        ],
                        [
                            106.644363,
                            10.819485
                        ],
                        [
                            106.638002,
                            10.817047
                        ],
                        [
                            106.638042,
                            10.816974
                        ],
                        [
                            106.637497,
                            10.816791
                        ],
                        [
                            106.636933,
                            10.817004
                        ],
                        [
                            106.636813,
                            10.817033
                        ],
                        [
                            106.63612,
                            10.816457
                        ],
                        [
                            106.635847,
                            10.81624
                        ],
                        [
                            106.63549,
                            10.815917
                        ],
                        [
                            106.635075,
                            10.815546
                        ],
                        [
                            106.63359,
                            10.81424
                        ],
                        [
                            106.633328,
                            10.814005
                        ],
                        [
                            106.633221,
                            10.813817
                        ],
                        [
                            106.633207,
                            10.813717
                        ],
                        [
                            106.633199,
                            10.813627
                        ],
                        [
                            106.633213,
                            10.813536
                        ],
                        [
                            106.633329,
                            10.813161
                        ],
                        [
                            106.633432,
                            10.81282
                        ],
                        [
                            106.633656,
                            10.812143
                        ],
                        [
                            106.634391,
                            10.809972
                        ],
                        [
                            106.634437,
                            10.809927
                        ],
                        [
                            106.634511,
                            10.809888
                        ],
                        [
                            106.634588,
                            10.80986
                        ],
                        [
                            106.634679,
                            10.80979
                        ],
                        [
                            106.634721,
                            10.809707
                        ],
                        [
                            106.634687,
                            10.809606
                        ],
                        [
                            106.634571,
                            10.809297
                        ],
                        [
                            106.634469,
                            10.808941
                        ],
                        [
                            106.635122,
                            10.807918
                        ],
                        [
                            106.635204,
                            10.807727
                        ],
                        [
                            106.635781,
                            10.806945
                        ],
                        [
                            106.635999,
                            10.806577
                        ],
                        [
                            106.636292,
                            10.806258
                        ],
                        [
                            106.63973,
                            10.807692
                        ],
                        [
                            106.639865,
                            10.807797
                        ],
                        [
                            106.640012,
                            10.80793
                        ],
                        [
                            106.640255,
                            10.80807
                        ],
                        [
                            106.640299,
                            10.808123
                        ],
                        [
                            106.640526,
                            10.808304
                        ],
                        [
                            106.640802,
                            10.808546
                        ],
                        [
                            106.640931,
                            10.808783
                        ],
                        [
                            106.641189,
                            10.809388
                        ],
                        [
                            106.641343,
                            10.809681
                        ],
                        [
                            106.641523,
                            10.809807
                        ],
                        [
                            106.641807,
                            10.809931
                        ],
                        [
                            106.643075,
                            10.810412
                        ],
                        [
                            106.643156,
                            10.810399
                        ],
                        [
                            106.643624,
                            10.810602
                        ],
                        [
                            106.644145,
                            10.810798
                        ],
                        [
                            106.644465,
                            10.810863
                        ],
                        [
                            106.644954,
                            10.811042
                        ],
                        [
                            106.64556,
                            10.81127
                        ],
                        [
                            106.645892,
                            10.81139
                        ],
                        [
                            106.645928,
                            10.811408
                        ],
                        [
                            106.646273,
                            10.811022
                        ],
                        [
                            106.646449,
                            10.810756
                        ],
                        [
                            106.646494,
                            10.810583
                        ],
                        [
                            106.646452,
                            10.810058
                        ],
                        [
                            106.646441,
                            10.809546
                        ],
                        [
                            106.646465,
                            10.809482
                        ],
                        [
                            106.646538,
                            10.809434
                        ],
                        [
                            106.647622,
                            10.809202
                        ],
                        [
                            106.647647,
                            10.809197
                        ],
                        [
                            106.647794,
                            10.809188
                        ],
                        [
                            106.647935,
                            10.809229
                        ],
                        [
                            106.648137,
                            10.809336
                        ],
                        [
                            106.648163,
                            10.809342
                        ],
                        [
                            106.648315,
                            10.809365
                        ],
                        [
                            106.648829,
                            10.809325
                        ],
                        [
                            106.650052,
                            10.809175
                        ],
                        [
                            106.651088,
                            10.809113
                        ],
                        [
                            106.65128,
                            10.810407
                        ],
                        [
                            106.651394,
                            10.810542
                        ],
                        [
                            106.653147,
                            10.811174
                        ],
                        [
                            106.653484,
                            10.811342
                        ],
                        [
                            106.654484,
                            10.81165
                        ],
                        [
                            106.6547,
                            10.811635
                        ],
                        [
                            106.654881,
                            10.811561
                        ],
                        [
                            106.655664,
                            10.811104
                        ],
                        [
                            106.655381,
                            10.81068
                        ],
                        [
                            106.655284,
                            10.810183
                        ],
                        [
                            106.655196,
                            10.809492
                        ],
                        [
                            106.655168,
                            10.808861
                        ],
                        [
                            106.654985,
                            10.806216
                        ],
                        [
                            106.657412,
                            10.805511
                        ],
                        [
                            106.657886,
                            10.805471
                        ],
                        [
                            106.658566,
                            10.805324
                        ],
                        [
                            106.659541,
                            10.805054
                        ],
                        [
                            106.661068,
                            10.804544
                        ],
                        [
                            106.661287,
                            10.80529
                        ],
                        [
                            106.661582,
                            10.808084
                        ],
                        [
                            106.662685,
                            10.807941
                        ],
                        [
                            106.664521,
                            10.80778
                        ],
                        [
                            106.664883,
                            10.812482
                        ],
                        [
                            106.665016,
                            10.813267
                        ],
                        [
                            106.664956,
                            10.81333
                        ],
                        [
                            106.66505,
                            10.813431
                        ],
                        [
                            106.665145,
                            10.813705
                        ],
                        [
                            106.665115,
                            10.813962
                        ],
                        [
                            106.665154,
                            10.814222
                        ],
                        [
                            106.665267,
                            10.814264
                        ],
                        [
                            106.665474,
                            10.814757
                        ],
                        [
                            106.66596,
                            10.815308
                        ],
                        [
                            106.6662,
                            10.815569
                        ],
                        [
                            106.666556,
                            10.81596
                        ],
                        [
                            106.66662,
                            10.816067
                        ],
                        [
                            106.666833,
                            10.816265
                        ],
                        [
                            106.667236,
                            10.816487
                        ],
                        [
                            106.667751,
                            10.816721
                        ],
                        [
                            106.671208,
                            10.818105
                        ],
                        [
                            106.671101,
                            10.818327
                        ],
                        [
                            106.671757,
                            10.818571
                        ],
                        [
                            106.671849,
                            10.818343
                        ],
                        [
                            106.672058,
                            10.818192
                        ],
                        [
                            106.671978,
                            10.818135
                        ],
                        [
                            106.672781,
                            10.81742
                        ],
                        [
                            106.673298,
                            10.817658
                        ],
                        [
                            106.673341,
                            10.817616
                        ],
                        [
                            106.673821,
                            10.817819
                        ],
                        [
                            106.673811,
                            10.817873
                        ],
                        [
                            106.674145,
                            10.818019
                        ],
                        [
                            106.67477,
                            10.818325
                        ],
                        [
                            106.674789,
                            10.818379
                        ],
                        [
                            106.674643,
                            10.818695
                        ],
                        [
                            106.674725,
                            10.818754
                        ],
                        [
                            106.674238,
                            10.819796
                        ],
                        [
                            106.674205,
                            10.820008
                        ],
                        [
                            106.673553,
                            10.821498
                        ],
                        [
                            106.673665,
                            10.821555
                        ],
                        [
                            106.67327,
                            10.822377
                        ],
                        [
                            106.674223,
                            10.82298
                        ],
                        [
                            106.675201,
                            10.823656
                        ],
                        [
                            106.675647,
                            10.823827
                        ],
                        [
                            106.676079,
                            10.823934
                        ],
                        [
                            106.67698,
                            10.824316
                        ],
                        [
                            106.677735,
                            10.824828
                        ],
                        [
                            106.678282,
                            10.825218
                        ],
                        [
                            106.678355,
                            10.825329
                        ],
                        [
                            106.678448,
                            10.825445
                        ],
                        [
                            106.678557,
                            10.825618
                        ],
                        [
                            106.678576,
                            10.825686
                        ],
                        [
                            106.678572,
                            10.826139
                        ],
                        [
                            106.678132,
                            10.826613
                        ],
                        [
                            106.677924,
                            10.826807
                        ],
                        [
                            106.677772,
                            10.826944
                        ],
                        [
                            106.677572,
                            10.827016
                        ],
                        [
                            106.677327,
                            10.827018
                        ],
                        [
                            106.677072,
                            10.826959
                        ],
                        [
                            106.676647,
                            10.826828
                        ],
                        [
                            106.676061,
                            10.826617
                        ],
                        [
                            106.675752,
                            10.826524
                        ],
                        [
                            106.675091,
                            10.826318
                        ],
                        [
                            106.674544,
                            10.826175
                        ],
                        [
                            106.674323,
                            10.826196
                        ],
                        [
                            106.674162,
                            10.826303
                        ],
                        [
                            106.674022,
                            10.826546
                        ],
                        [
                            106.673881,
                            10.826816
                        ],
                        [
                            106.67372,
                            10.827132
                        ],
                        [
                            106.67352,
                            10.827511
                        ],
                        [
                            106.673413,
                            10.827745
                        ],
                        [
                            106.673276,
                            10.827852
                        ],
                        [
                            106.673123,
                            10.827943
                        ],
                        [
                            106.672937,
                            10.827937
                        ],
                        [
                            106.672619,
                            10.827857
                        ],
                        [
                            106.672177,
                            10.827722
                        ],
                        [
                            106.671771,
                            10.827566
                        ],
                        [
                            106.671499,
                            10.827482
                        ],
                        [
                            106.671048,
                            10.827347
                        ],
                        [
                            106.670802,
                            10.827273
                        ],
                        [
                            106.670531,
                            10.827193
                        ],
                        [
                            106.670387,
                            10.827174
                        ],
                        [
                            106.670044,
                            10.827347
                        ],
                        [
                            106.668325,
                            10.828259
                        ],
                        [
                            106.668068,
                            10.828362
                        ],
                        [
                            106.667896,
                            10.828398
                        ],
                        [
                            106.667716,
                            10.82835
                        ],
                        [
                            106.667525,
                            10.828386
                        ],
                        [
                            106.667308,
                            10.828426
                        ],
                        [
                            106.666235,
                            10.828432
                        ],
                        [
                            106.665817,
                            10.828158
                        ],
                        [
                            106.665677,
                            10.828112
                        ],
                        [
                            106.665549,
                            10.828029
                        ],
                        [
                            106.665399,
                            10.827884
                        ],
                        [
                            106.664519,
                            10.827248
                        ],
                        [
                            106.663866,
                            10.827874
                        ],
                        [
                            106.663924,
                            10.828042
                        ],
                        [
                            106.66386,
                            10.828126
                        ],
                        [
                            106.663733,
                            10.828148
                        ],
                        [
                            106.663493,
                            10.828908
                        ],
                        [
                            106.663515,
                            10.829492
                        ],
                        [
                            106.6635,
                            10.829973
                        ],
                        [
                            106.663467,
                            10.830105
                        ],
                        [
                            106.662156,
                            10.83109
                        ],
                        [
                            106.662034,
                            10.831235
                        ],
                        [
                            106.661985,
                            10.831351
                        ],
                        [
                            106.661875,
                            10.831465
                        ],
                        [
                            106.661847,
                            10.831448
                        ],
                        [
                            106.661858,
                            10.831374
                        ]
                    ],
                    Name: "Khu vực sân bay",
                    Description: "Đây là khu vực chính của Sân bay Tân Sơn Nhất, bao gồm nhà ga và đường băng.",
                    symbol: {
                        type: "simple-fill",
                        color: [227, 139, 79, 0.3],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "polygon",
                    rings: [
                        [
                            106.674983,
                            10.815129
                        ],
                        [
                            106.676267,
                            10.814794
                        ],
                        [
                            106.677743,
                            10.814404
                        ],
                        [
                            106.677803,
                            10.814151
                        ],
                        [
                            106.678032,
                            10.813968
                        ],
                        [
                            106.67817,
                            10.813848
                        ],
                        [
                            106.678305,
                            10.813755
                        ],
                        [
                            106.678504,
                            10.813565
                        ],
                        [
                            106.678502,
                            10.813462
                        ],
                        [
                            106.678487,
                            10.813312
                        ],
                        [
                            106.678324,
                            10.811442
                        ],
                        [
                            106.678189,
                            10.811394
                        ],
                        [
                            106.678182,
                            10.811295
                        ],
                        [
                            106.678163,
                            10.811031
                        ],
                        [
                            106.678204,
                            10.811029
                        ],
                        [
                            106.678167,
                            10.810547
                        ],
                        [
                            106.678369,
                            10.810515
                        ],
                        [
                            106.678365,
                            10.810416
                        ],
                        [
                            106.677876,
                            10.810456
                        ],
                        [
                            106.677839,
                            10.810245
                        ],
                        [
                            106.677584,
                            10.80995
                        ],
                        [
                            106.676082,
                            10.811187
                        ],
                        [
                            106.675959,
                            10.811314
                        ],
                        [
                            106.675895,
                            10.811215
                        ],
                        [
                            106.675258,
                            10.810471
                        ],
                        [
                            106.674833,
                            10.810039
                        ],
                        [
                            106.674689,
                            10.809864
                        ],
                        [
                            106.674595,
                            10.809864
                        ],
                        [
                            106.674517,
                            10.809859
                        ],
                        [
                            106.674339,
                            10.809872
                        ],
                        [
                            106.674073,
                            10.809876
                        ],
                        [
                            106.673732,
                            10.809914
                        ],
                        [
                            106.673614,
                            10.809908
                        ],
                        [
                            106.673442,
                            10.809859
                        ],
                        [
                            106.673309,
                            10.809822
                        ],
                        [
                            106.673148,
                            10.809782
                        ],
                        [
                            106.673095,
                            10.809771
                        ],
                        [
                            106.672872,
                            10.809935
                        ],
                        [
                            106.672651,
                            10.810247
                        ],
                        [
                            106.672505,
                            10.810494
                        ],
                        [
                            106.672397,
                            10.810679
                        ],
                        [
                            106.672125,
                            10.810962
                        ],
                        [
                            106.672144,
                            10.811411
                        ],
                        [
                            106.672065,
                            10.811906
                        ],
                        [
                            106.672062,
                            10.811995
                        ],
                        [
                            106.672049,
                            10.812503
                        ],
                        [
                            106.672113,
                            10.812916
                        ],
                        [
                            106.672276,
                            10.81354
                        ],
                        [
                            106.672531,
                            10.814
                        ],
                        [
                            106.672549,
                            10.813974
                        ],
                        [
                            106.672634,
                            10.814023
                        ],
                        [
                            106.672836,
                            10.81416
                        ],
                        [
                            106.673652,
                            10.814609
                        ],
                        [
                            106.673866,
                            10.814664
                        ],
                        [
                            106.673888,
                            10.814638
                        ],
                        [
                            106.673958,
                            10.814624
                        ],
                        [
                            106.674143,
                            10.814674
                        ],
                        [
                            106.674426,
                            10.814693
                        ],
                        [
                            106.674555,
                            10.814727
                        ],
                        [
                            106.674879,
                            10.814984
                        ],
                        [
                            106.674933,
                            10.815009
                        ]
                    ],
                    Name: "Khu vực công viên",
                    Description: "Đây là khu vực chính của Công viên Gia Định, bao gồm các khu vực xanh và tiện ích công cộng.",
                    symbol: {
                        type: "simple-fill",
                        color: [0, 153, 0, 0.4],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                }
            ],
            "lines": [
                {
                    type: "polyline",
                    paths: [
                        [106.6415, 10.8105],
                        [106.6380, 10.8210],
                        [106.6470, 10.8300],
                        [106.6710, 10.8260],
                        [106.6715, 10.8060],
                        [106.6500, 10.8035],
                        [106.6415, 10.8105]
                    ],
                    Name: "Ranh giới sân bay",
                    Description: "Đây là đường ranh giới bao quanh Sân bay Tân Sơn Nhất.",
                    symbol: {
                        type: "simple-line",
                        color: [226, 119, 40],
                        width: 2.5
                    },
                    popupTemplate: templatePopup
                }
            ]
        };

        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/Graphic",
            "esri/layers/GraphicsLayer"
        ], function (Map, MapView, Graphic, GraphicsLayer) {
            var map = new Map({ basemap: "topo-vector" });
            var view = new MapView({
                container: "viewDiv",
                map: map,
                center: [106.6521, 10.8188],
                zoom: 14
            });

            var graphicsLayer = new GraphicsLayer();
            map.add(graphicsLayer);

            function createGraphic(data) {
                return new Graphic({
                    geometry: data,
                    symbol: data.symbol,
                    attributes: data,
                    popupTemplate: data.popupTemplate
                });
            }

            jsondata.points.forEach(function (data) {
                graphicsLayer.add(createGraphic(data));
            });
            jsondata.polygons.forEach(function (data) {
                graphicsLayer.add(createGraphic(data));
            });
            jsondata.lines.forEach(function (data) {
                graphicsLayer.add(createGraphic(data));
            });

            // Khai báo mảng để lưu trữ các tọa độ được click
            var clickedCoordinates = [];
            var clickedGraphics = []; // Để lưu trữ các graphic điểm đã click

            // --- Thêm layer riêng cho các điểm click vào bản đồ ---
            // Đảm bảo rằng biến 'map' đã được khởi tạo trước khi gọi dòng này
            // Nếu bạn đã có map.add(graphicsLayer); thì hãy thêm dòng này sau đó.
            var clickGraphicsLayer; // Khai báo biến layer ở đây
            require([
                "esri/Graphic",
                "esri/layers/GraphicsLayer"
            ], function (Graphic, GraphicsLayer) {
                clickGraphicsLayer = new GraphicsLayer(); // Khởi tạo GraphicsLayer
                map.add(clickGraphicsLayer); // Thêm layer riêng cho các điểm click vào bản đồ

                // --- Xử lý sự kiện click trên bản đồ ---
                // Đảm bảo rằng biến 'view' đã được khởi tạo trước khi gọi dòng này
                view.on("click", function (event) {
                    var latitude = parseFloat(event.mapPoint.latitude.toFixed(6));
                    var longitude = parseFloat(event.mapPoint.longitude.toFixed(6));
                    var newCoordinate = [longitude, latitude]; // Định dạng [kinh độ, vĩ độ]

                    clickedCoordinates.push(newCoordinate); // Thêm tọa độ vào mảng

                    // Tạo graphic cho điểm mới click
                    var pointGraphic = new Graphic({
                        geometry: {
                            type: "point",
                            longitude: longitude,
                            latitude: latitude
                        },
                        symbol: {
                            type: "simple-marker",
                            color: [0, 150, 136], // Màu xanh ngọc
                            size: 8,
                            outline: {
                                color: [255, 255, 255],
                                width: 1
                            }
                        },
                        popupTemplate: {
                            title: "Điểm đã chọn",
                            content: `Vĩ độ: ${latitude.toFixed(6)}<br>Kinh độ: ${longitude.toFixed(6)}`
                        }
                    });
                    clickGraphicsLayer.add(pointGraphic); // Thêm vào layer riêng
                    clickedGraphics.push(pointGraphic); // Lưu graphic để có thể xóa sau

                    updateCoordinateOutput(); // Cập nhật hiển thị JSON
                });

                // Hàm để cập nhật nội dung hiển thị JSON (và log ra console)
                function updateCoordinateOutput() {
                    var jsonString = JSON.stringify(clickedCoordinates, null, 2); // Định dạng JSON đẹp hơn

                    // Log ra console
                    console.log("Current Coordinates (JSON):");
                    console.log(jsonString);

                    // Cập nhật hiển thị trên trang HTML (nếu có div output)
                    var outputDiv = document.getElementById("coordinateOutput");
                    if (outputDiv) {
                        outputDiv.textContent = jsonString;
                    } else {
                        console.warn("Element with id 'coordinateOutput' not found. Coordinates will only be logged to console.");
                    }
                }

                // --- Nút để xóa tất cả các điểm đã click và mảng tọa độ ---
                var clearButton = document.getElementById("clearButton");
                if (clearButton) { // Kiểm tra xem nút có tồn tại không
                    clearButton.addEventListener("click", function () {
                        clickedCoordinates = []; // Xóa mảng tọa độ
                        clickGraphicsLayer.removeAll(); // Xóa tất cả graphic trên layer click
                        clickedGraphics = []; // Xóa mảng graphic đã lưu
                        updateCoordinateOutput(); // Cập nhật lại hiển thị (sẽ log mảng rỗng)
                    });
                } else {
                    console.warn("Element with id 'clearButton' not found. Clear functionality will not be available.");
                }
            });
        });
    </script>
</head>

<body>
    <div id="viewDiv"></div>
</body>

</html>
