<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ArcGIS JavaScript - Sân bay Tân Sơn Nhất</title>
    <style>
        html,
        body,
        #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.26/"></script>

    <script>
        // Popup templates
        var point_template_tree = {
            title: "{Name}",
            content: "Cây này ở <b>{Location}</b>."
        };
        var point_template_light = {
            title: "{Name}",
            content: "Bóng đèn này ở <b>{Location}</b>."
        };
        var point_template_chair = {
            title: "{Name}",
            content: "Cái ghế này ở <b>{Location}</b>."
        };
        var point_template_area = {
            title: "{Name}",
            content: "Khu vực này ở <b>{Location}</b>."
        };
        var point_template_university = {
            title: "{Name}",
            content: "Trường ở <b>{Location}</b>."
        };
        var templatePopup = {
            title: "{Name}",
            content: "{Description}"
        };

        // Data
        var jsondata = {
            "points": [
                {
                    type: "point",
                    longitude: 106.6521,
                    latitude: 10.8188,
                    Name: "Sân bay Quốc tế Tân Sơn Nhất",
                    Description: `
                        <p><strong>Địa chỉ:</strong> Sân bay Quốc tế Tân Sơn Nhất, Phường 2, Quận Tân Bình, Thành phố Hồ Chí Minh, Việt Nam.</p>
                        <p><strong>Giới thiệu:</strong> Sân bay Quốc tế Tân Sơn Nhất (IATA: SGN, ICAO: VVTS) là cảng hàng không lớn nhất Việt Nam về công suất nhà ga và lưu lượng hành khách. Sân bay nằm cách trung tâm Thành phố Hồ Chí Minh khoảng 6 km về phía Bắc, đóng vai trò là cửa ngõ hàng không quan trọng của khu vực phía Nam.</p>
                        <p>Khu vực sân bay bao gồm nhà ga quốc nội, nhà ga quốc tế, các khu vực dịch vụ, bãi đỗ máy bay, đường băng và nhiều tiện ích hiện đại phục vụ hàng triệu lượt khách mỗi năm. Đây là trung tâm hoạt động của nhiều hãng hàng không lớn trong nước và quốc tế.</p>
				    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://static.arcgis.com/images/Symbols/Transportation/Airplane.png",
                        width: "48px",
                        height: "48px"
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "point",
                    longitude: 106.674272,
                    latitude: 10.812432,
                    Name: "Công viên Gia Định",
                    Description: `
                        <p><strong>Địa chỉ:</strong> Công viên Gia Định, Quận Gò Vấp, TP.HCM.</p>
                        <p><strong>Giới thiệu:</strong> Công viên lớn với nhiều cây xanh, khu vui chơi và tiện ích cộng đồng.</p>
                    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://cdn.arcgis.com/sharing/rest/content/items/738c8d0e43464829bc816185f11eb954/resources/styles/thumbnails/Park_POI-Large_3.png",
                        width: "58px",
                        height: "58px"
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "point",
                    longitude: 106.66735100638397,
                    latitude: 10.801907333396343,
                    Name: "Sân vận động Quân khu 7",
                    Description: `
        <p><strong>Địa chỉ:</strong>2A Đ. Phan Đình Giót, Phường 2, Tân Bình, Hồ Chí Minh.</p>
        <p><strong>Giới thiệu:</strong> Sân vận động Quân khu 7 là một trong những sân vận động lớn tại TP. Hồ Chí Minh, thường xuyên tổ chức các trận bóng đá, sự kiện thể thao, cũng như những hoạt động văn hóa – giải trí quan trọng.</p>
    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://cdn-icons-png.flaticon.com/512/5540/5540420.png",
                        width: "58px",
                        height: "58px"
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "point",
                    longitude: 106.65109704648569,
                    latitude: 10.830367214603356,
                    Name: "Sân golf Tân Sơn Nhất",
                    Description: `
        <p><strong>Địa chỉ:</strong>6 Đ. Tân Sơn, phường 12, Gò Vấp, Hồ Chí Minh.</p>
        <p><strong>Giới thiệu:</strong> Sân golf Tân Sơn Nhất là một trong những sân golf hiện đại bậc nhất Việt Nam, với 36 lỗ đạt tiêu chuẩn quốc tế. Khu vực này cung cấp nhiều dịch vụ cao cấp như nhà hàng, khu nghỉ dưỡng và trung tâm hội nghị.</p>
    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://cdn-icons-png.flaticon.com/512/2514/2514078.png",
                        width: "58px",
                        height: "58px"
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "point",
                    longitude: 106.6645040735894,
                    latitude: 10.801840771323626,
                    Name: "Công viên Hoàng Văn Thụ",
                    Description: `
        <p><strong>Địa chỉ:</strong>Phường 2, Tân Bình, Hồ Chí Minh.</p>
        <p><strong>Giới thiệu:</strong> Công viên Hoàng Văn Thụ là một trong những công viên cây xanh lớn nhất thành phố, đóng vai trò “lá phổi xanh” cho khu vực trung tâm. Nơi đây thích hợp cho các hoạt động vui chơi, thể dục thể thao và tổ chức sự kiện ngoài trời.</p>
    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://cdn-icons-png.flaticon.com/512/532/532988.png",
                        width: "58px",
                        height: "58px"
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "point",
                    longitude: 106.666136,
                    latitude: 10.802178,
                    Name: "Bệnh viện Tân Sơn Nhất",
                    Description: `
        <p><strong>Địa chỉ:</strong> 2/2 Trường Sơn, Phường 2, Quận Tân Bình, TP. Hồ Chí Minh.</p>
        <p><strong>Giới thiệu:</strong> Bệnh viện Tân Sơn Nhất là cơ sở y tế đa khoa cung cấp nhiều dịch vụ chăm sóc sức khỏe cho người dân khu vực Tân Bình và lân cận. Bệnh viện có đội ngũ bác sĩ giàu kinh nghiệm cùng các trang thiết bị hiện đại.</p>
    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://cdn-icons-png.flaticon.com/512/3063/3063135.png",
                        width: "58px",
                        height: "58px"
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "point",
                    longitude: 106.68075000000000,
                    latitude: 10.818750000000000,
                    Name: "Bệnh viện Quân y 175",
                    Description: `
        <p><strong>Địa chỉ:</strong> 786 Nguyễn Kiệm, Phường 3, Quận Gò Vấp, TP. Hồ Chí Minh.</p>
        <p><strong>Giới thiệu:</strong> Bệnh viện Quân y 175 là bệnh viện tuyến cuối của Quân đội tại phía Nam, đồng thời là bệnh viện đa khoa lớn phục vụ cả quân nhân và nhân dân. Nơi đây còn nổi bật với Viện Chấn thương Chỉnh hình và Trung tâm Y học hàng không.</p>
    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://cdn-icons-png.flaticon.com/128/619/619155.png",
                        width: "58px",
                        height: "58px"
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "point",
                    longitude: 106.640945,
                    latitude: 10.807723,
                    Name: "Sân tập Sunshine",
                    Description: `
        <p><strong>Địa chỉ:</strong> Gần khu vực sân bay Tân Sơn Nhất, Quận Tân Bình, TP. Hồ Chí Minh.</p>
        <p><strong>Giới thiệu:</strong> Sân tập Sunshine là khu thể thao, tập luyện đa năng phục vụ cho nhu cầu rèn luyện sức khỏe và thi đấu phong trào. Nơi đây được trang bị cơ sở vật chất đáp ứng các hoạt động thể dục thể thao.</p>
    `,
                    symbol: {
                        type: "picture-marker",
                        url: "https://cdn-icons-png.flaticon.com/512/2514/2514078.png",
                        width: "58px",
                        height: "58px"
                    },
                    popupTemplate: templatePopup
                }

            ],
            "polygons": [
                {
                    type: "polygon",
                    rings: [

                        [
                            106.661873,
                            10.831288
                        ],
                        [
                            106.66186,
                            10.831234
                        ],
                        [
                            106.661752,
                            10.831245
                        ],
                        [
                            106.661668,
                            10.831254
                        ],
                        [
                            106.661594,
                            10.831261
                        ],
                        [
                            106.661513,
                            10.831269
                        ],
                        [
                            106.661419,
                            10.831279
                        ],
                        [
                            106.661324,
                            10.831289
                        ],
                        [
                            106.66123,
                            10.831297
                        ],
                        [
                            106.661156,
                            10.831303
                        ],
                        [
                            106.661073,
                            10.83131
                        ],
                        [
                            106.660996,
                            10.831317
                        ],
                        [
                            106.660908,
                            10.831324
                        ],
                        [
                            106.660824,
                            10.831331
                        ],
                        [
                            106.660768,
                            10.831335
                        ],
                        [
                            106.660725,
                            10.831339
                        ],
                        [
                            106.660673,
                            10.831344
                        ],
                        [
                            106.660614,
                            10.831345
                        ],
                        [
                            106.660547,
                            10.831348
                        ],
                        [
                            106.660526,
                            10.831349
                        ],
                        [
                            106.660488,
                            10.831353
                        ],
                        [
                            106.660421,
                            10.831359
                        ],
                        [
                            106.660381,
                            10.831363
                        ],
                        [
                            106.660374,
                            10.831364
                        ],
                        [
                            106.660349,
                            10.831325
                        ],
                        [
                            106.660332,
                            10.831297
                        ],
                        [
                            106.66031,
                            10.831262
                        ],
                        [
                            106.660294,
                            10.831236
                        ],
                        [
                            106.660256,
                            10.831174
                        ],
                        [
                            106.660242,
                            10.831152
                        ],
                        [
                            106.660221,
                            10.831118
                        ],
                        [
                            106.660192,
                            10.83107
                        ],
                        [
                            106.660149,
                            10.831001
                        ],
                        [
                            106.660124,
                            10.83095
                        ],
                        [
                            106.660103,
                            10.830906
                        ],
                        [
                            106.660083,
                            10.830865
                        ],
                        [
                            106.660044,
                            10.830788
                        ],
                        [
                            106.660028,
                            10.830744
                        ],
                        [
                            106.659925,
                            10.830481
                        ],
                        [
                            106.659765,
                            10.830098
                        ],
                        [
                            106.65969,
                            10.829984
                        ],
                        [
                            106.659653,
                            10.829966
                        ],
                        [
                            106.65953,
                            10.829968
                        ],
                        [
                            106.659376,
                            10.829999
                        ],
                        [
                            106.659334,
                            10.830004
                        ],
                        [
                            106.659214,
                            10.830018
                        ],
                        [
                            106.659013,
                            10.830041
                        ],
                        [
                            106.658942,
                            10.829979
                        ],
                        [
                            106.658895,
                            10.829964
                        ],
                        [
                            106.658678,
                            10.82997
                        ],
                        [
                            106.658368,
                            10.829979
                        ],
                        [
                            106.6584,
                            10.829927
                        ],
                        [
                            106.658401,
                            10.829925
                        ],
                        [
                            106.658328,
                            10.829917
                        ],
                        [
                            106.658325,
                            10.829916
                        ],
                        [
                            106.658203,
                            10.829848
                        ],
                        [
                            106.658199,
                            10.829774
                        ],
                        [
                            106.658196,
                            10.82971
                        ],
                        [
                            106.658192,
                            10.829645
                        ],
                        [
                            106.658187,
                            10.82956
                        ],
                        [
                            106.658186,
                            10.82953
                        ],
                        [
                            106.658183,
                            10.829485
                        ],
                        [
                            106.658181,
                            10.829445
                        ],
                        [
                            106.658179,
                            10.829411
                        ],
                        [
                            106.658169,
                            10.829225
                        ],
                        [
                            106.658148,
                            10.828855
                        ],
                        [
                            106.658111,
                            10.828176
                        ],
                        [
                            106.658084,
                            10.827807
                        ],
                        [
                            106.658081,
                            10.827653
                        ],
                        [
                            106.658067,
                            10.827624
                        ],
                        [
                            106.658051,
                            10.827453
                        ],
                        [
                            106.658038,
                            10.827312
                        ],
                        [
                            106.658024,
                            10.827169
                        ],
                        [
                            106.657997,
                            10.826878
                        ],
                        [
                            106.657979,
                            10.826684
                        ],
                        [
                            106.657964,
                            10.826512
                        ],
                        [
                            106.657876,
                            10.825436
                        ],
                        [
                            106.657705,
                            10.825195
                        ],
                        [
                            106.645166,
                            10.820497
                        ],
                        [
                            106.644825,
                            10.820472
                        ],
                        [
                            106.644802,
                            10.820394
                        ],
                        [
                            106.644688,
                            10.820335
                        ],
                        [
                            106.644615,
                            10.820177
                        ],
                        [
                            106.644363,
                            10.819485
                        ],
                        [
                            106.638002,
                            10.817047
                        ],
                        [
                            106.638042,
                            10.816974
                        ],
                        [
                            106.637497,
                            10.816791
                        ],
                        [
                            106.636933,
                            10.817004
                        ],
                        [
                            106.636813,
                            10.817033
                        ],
                        [
                            106.63612,
                            10.816457
                        ],
                        [
                            106.635847,
                            10.81624
                        ],
                        [
                            106.63549,
                            10.815917
                        ],
                        [
                            106.635075,
                            10.815546
                        ],
                        [
                            106.63359,
                            10.81424
                        ],
                        [
                            106.633328,
                            10.814005
                        ],
                        [
                            106.633221,
                            10.813817
                        ],
                        [
                            106.633207,
                            10.813717
                        ],
                        [
                            106.633199,
                            10.813627
                        ],
                        [
                            106.633213,
                            10.813536
                        ],
                        [
                            106.633329,
                            10.813161
                        ],
                        [
                            106.633432,
                            10.81282
                        ],
                        [
                            106.633656,
                            10.812143
                        ],
                        [
                            106.634391,
                            10.809972
                        ],
                        [
                            106.634437,
                            10.809927
                        ],
                        [
                            106.634511,
                            10.809888
                        ],
                        [
                            106.634588,
                            10.80986
                        ],
                        [
                            106.634679,
                            10.80979
                        ],
                        [
                            106.634721,
                            10.809707
                        ],
                        [
                            106.634687,
                            10.809606
                        ],
                        [
                            106.634571,
                            10.809297
                        ],
                        [
                            106.634469,
                            10.808941
                        ],
                        [
                            106.635122,
                            10.807918
                        ],
                        [
                            106.635204,
                            10.807727
                        ],
                        [
                            106.635781,
                            10.806945
                        ],
                        [
                            106.635999,
                            10.806577
                        ],
                        [
                            106.636292,
                            10.806258
                        ],
                        [
                            106.63973,
                            10.807692
                        ],
                        [
                            106.639865,
                            10.807797
                        ],
                        [
                            106.640012,
                            10.80793
                        ],
                        [
                            106.640255,
                            10.80807
                        ],
                        [
                            106.640299,
                            10.808123
                        ],
                        [
                            106.640526,
                            10.808304
                        ],
                        [
                            106.640802,
                            10.808546
                        ],
                        [
                            106.640931,
                            10.808783
                        ],
                        [
                            106.641189,
                            10.809388
                        ],
                        [
                            106.641343,
                            10.809681
                        ],
                        [
                            106.641523,
                            10.809807
                        ],
                        [
                            106.641807,
                            10.809931
                        ],
                        [
                            106.643075,
                            10.810412
                        ],
                        [
                            106.643156,
                            10.810399
                        ],
                        [
                            106.643624,
                            10.810602
                        ],
                        [
                            106.644145,
                            10.810798
                        ],
                        [
                            106.644465,
                            10.810863
                        ],
                        [
                            106.644954,
                            10.811042
                        ],
                        [
                            106.64556,
                            10.81127
                        ],
                        [
                            106.645892,
                            10.81139
                        ],
                        [
                            106.645928,
                            10.811408
                        ],
                        [
                            106.646273,
                            10.811022
                        ],
                        [
                            106.646449,
                            10.810756
                        ],
                        [
                            106.646494,
                            10.810583
                        ],
                        [
                            106.646452,
                            10.810058
                        ],
                        [
                            106.646441,
                            10.809546
                        ],
                        [
                            106.646465,
                            10.809482
                        ],
                        [
                            106.646538,
                            10.809434
                        ],
                        [
                            106.647622,
                            10.809202
                        ],
                        [
                            106.647647,
                            10.809197
                        ],
                        [
                            106.647794,
                            10.809188
                        ],
                        [
                            106.647935,
                            10.809229
                        ],
                        [
                            106.648137,
                            10.809336
                        ],
                        [
                            106.648163,
                            10.809342
                        ],
                        [
                            106.648315,
                            10.809365
                        ],
                        [
                            106.648829,
                            10.809325
                        ],
                        [
                            106.650052,
                            10.809175
                        ],
                        [
                            106.651088,
                            10.809113
                        ],
                        [
                            106.65128,
                            10.810407
                        ],
                        [
                            106.651394,
                            10.810542
                        ],
                        [
                            106.653147,
                            10.811174
                        ],
                        [
                            106.653484,
                            10.811342
                        ],
                        [
                            106.654484,
                            10.81165
                        ],
                        [
                            106.6547,
                            10.811635
                        ],
                        [
                            106.654881,
                            10.811561
                        ],
                        [
                            106.655664,
                            10.811104
                        ],
                        [
                            106.655381,
                            10.81068
                        ],
                        [
                            106.655284,
                            10.810183
                        ],
                        [
                            106.655196,
                            10.809492
                        ],
                        [
                            106.655168,
                            10.808861
                        ],
                        [
                            106.654985,
                            10.806216
                        ],
                        [
                            106.657412,
                            10.805511
                        ],
                        [
                            106.657886,
                            10.805471
                        ],
                        [
                            106.658566,
                            10.805324
                        ],
                        [
                            106.659541,
                            10.805054
                        ],
                        [
                            106.661068,
                            10.804544
                        ],
                        [
                            106.661287,
                            10.80529
                        ],
                        [
                            106.661582,
                            10.808084
                        ],
                        [
                            106.662685,
                            10.807941
                        ],
                        [
                            106.664521,
                            10.80778
                        ],
                        [
                            106.664883,
                            10.812482
                        ],
                        [
                            106.665016,
                            10.813267
                        ],
                        [
                            106.664956,
                            10.81333
                        ],
                        [
                            106.66505,
                            10.813431
                        ],
                        [
                            106.665145,
                            10.813705
                        ],
                        [
                            106.665115,
                            10.813962
                        ],
                        [
                            106.665154,
                            10.814222
                        ],
                        [
                            106.665267,
                            10.814264
                        ],
                        [
                            106.665474,
                            10.814757
                        ],
                        [
                            106.66596,
                            10.815308
                        ],
                        [
                            106.6662,
                            10.815569
                        ],
                        [
                            106.666556,
                            10.81596
                        ],
                        [
                            106.66662,
                            10.816067
                        ],
                        [
                            106.666833,
                            10.816265
                        ],
                        [
                            106.667236,
                            10.816487
                        ],
                        [
                            106.667751,
                            10.816721
                        ],
                        [
                            106.671208,
                            10.818105
                        ],
                        [
                            106.671101,
                            10.818327
                        ],
                        [
                            106.671757,
                            10.818571
                        ],
                        [
                            106.671849,
                            10.818343
                        ],
                        [
                            106.672058,
                            10.818192
                        ],
                        [
                            106.671978,
                            10.818135
                        ],
                        [
                            106.672781,
                            10.81742
                        ],
                        [
                            106.673298,
                            10.817658
                        ],
                        [
                            106.673341,
                            10.817616
                        ],
                        [
                            106.673821,
                            10.817819
                        ],
                        [
                            106.673811,
                            10.817873
                        ],
                        [
                            106.674145,
                            10.818019
                        ],
                        [
                            106.67477,
                            10.818325
                        ],
                        [
                            106.674789,
                            10.818379
                        ],
                        [
                            106.674643,
                            10.818695
                        ],
                        [
                            106.674725,
                            10.818754
                        ],
                        [
                            106.674238,
                            10.819796
                        ],
                        [
                            106.674205,
                            10.820008
                        ],
                        [
                            106.673553,
                            10.821498
                        ],
                        [
                            106.673665,
                            10.821555
                        ],
                        [
                            106.67327,
                            10.822377
                        ],
                        [
                            106.674223,
                            10.82298
                        ],
                        [
                            106.675201,
                            10.823656
                        ],
                        [
                            106.675647,
                            10.823827
                        ],
                        [
                            106.676079,
                            10.823934
                        ],
                        [
                            106.67698,
                            10.824316
                        ],
                        [
                            106.677735,
                            10.824828
                        ],
                        [
                            106.678282,
                            10.825218
                        ],
                        [
                            106.678355,
                            10.825329
                        ],
                        [
                            106.678448,
                            10.825445
                        ],
                        [
                            106.678557,
                            10.825618
                        ],
                        [
                            106.678576,
                            10.825686
                        ],
                        [
                            106.678572,
                            10.826139
                        ],
                        [
                            106.678132,
                            10.826613
                        ],
                        [
                            106.677924,
                            10.826807
                        ],
                        [
                            106.677772,
                            10.826944
                        ],
                        [
                            106.677572,
                            10.827016
                        ],
                        [
                            106.677327,
                            10.827018
                        ],
                        [
                            106.677072,
                            10.826959
                        ],
                        [
                            106.676647,
                            10.826828
                        ],
                        [
                            106.676061,
                            10.826617
                        ],
                        [
                            106.675752,
                            10.826524
                        ],
                        [
                            106.675091,
                            10.826318
                        ],
                        [
                            106.674544,
                            10.826175
                        ],
                        [
                            106.674323,
                            10.826196
                        ],
                        [
                            106.674162,
                            10.826303
                        ],
                        [
                            106.674022,
                            10.826546
                        ],
                        [
                            106.673881,
                            10.826816
                        ],
                        [
                            106.67372,
                            10.827132
                        ],
                        [
                            106.67352,
                            10.827511
                        ],
                        [
                            106.673413,
                            10.827745
                        ],
                        [
                            106.673276,
                            10.827852
                        ],
                        [
                            106.673123,
                            10.827943
                        ],
                        [
                            106.672937,
                            10.827937
                        ],
                        [
                            106.672619,
                            10.827857
                        ],
                        [
                            106.672177,
                            10.827722
                        ],
                        [
                            106.671771,
                            10.827566
                        ],
                        [
                            106.671499,
                            10.827482
                        ],
                        [
                            106.671048,
                            10.827347
                        ],
                        [
                            106.670802,
                            10.827273
                        ],
                        [
                            106.670531,
                            10.827193
                        ],
                        [
                            106.670387,
                            10.827174
                        ],
                        [
                            106.670044,
                            10.827347
                        ],
                        [
                            106.668325,
                            10.828259
                        ],
                        [
                            106.668068,
                            10.828362
                        ],
                        [
                            106.667896,
                            10.828398
                        ],
                        [
                            106.667716,
                            10.82835
                        ],
                        [
                            106.667525,
                            10.828386
                        ],
                        [
                            106.667308,
                            10.828426
                        ],
                        [
                            106.666235,
                            10.828432
                        ],
                        [
                            106.665817,
                            10.828158
                        ],
                        [
                            106.665677,
                            10.828112
                        ],
                        [
                            106.665549,
                            10.828029
                        ],
                        [
                            106.665399,
                            10.827884
                        ],
                        [
                            106.664519,
                            10.827248
                        ],
                        [
                            106.663866,
                            10.827874
                        ],
                        [
                            106.663924,
                            10.828042
                        ],
                        [
                            106.66386,
                            10.828126
                        ],
                        [
                            106.663733,
                            10.828148
                        ],
                        [
                            106.663493,
                            10.828908
                        ],
                        [
                            106.663515,
                            10.829492
                        ],
                        [
                            106.6635,
                            10.829973
                        ],
                        [
                            106.663467,
                            10.830105
                        ],
                        [
                            106.662156,
                            10.83109
                        ],
                        [
                            106.662034,
                            10.831235
                        ],
                        [
                            106.661985,
                            10.831351
                        ],
                        [
                            106.661875,
                            10.831465
                        ],
                        [
                            106.661847,
                            10.831448
                        ],
                        [
                            106.661858,
                            10.831374
                        ]
                    ],
                    Name: "Khu vực sân bay",
                    Description: "Đây là khu vực chính của Sân bay Tân Sơn Nhất, bao gồm nhà ga và đường băng.",
                    symbol: {
                        type: "simple-fill",
                        color: [30, 144, 255, 0.4],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "polygon",
                    rings: [
                        [
                            106.674983,
                            10.815129
                        ],
                        [
                            106.676267,
                            10.814794
                        ],
                        [
                            106.677743,
                            10.814404
                        ],
                        [
                            106.677803,
                            10.814151
                        ],
                        [
                            106.678032,
                            10.813968
                        ],
                        [
                            106.67817,
                            10.813848
                        ],
                        [
                            106.678305,
                            10.813755
                        ],
                        [
                            106.678504,
                            10.813565
                        ],
                        [
                            106.678502,
                            10.813462
                        ],
                        [
                            106.678487,
                            10.813312
                        ],
                        [
                            106.678324,
                            10.811442
                        ],
                        [
                            106.678189,
                            10.811394
                        ],
                        [
                            106.678182,
                            10.811295
                        ],
                        [
                            106.678163,
                            10.811031
                        ],
                        [
                            106.678204,
                            10.811029
                        ],
                        [
                            106.678167,
                            10.810547
                        ],
                        [
                            106.678369,
                            10.810515
                        ],
                        [
                            106.678365,
                            10.810416
                        ],
                        [
                            106.677876,
                            10.810456
                        ],
                        [
                            106.677839,
                            10.810245
                        ],
                        [
                            106.677584,
                            10.80995
                        ],
                        [
                            106.676082,
                            10.811187
                        ],
                        [
                            106.675959,
                            10.811314
                        ],
                        [
                            106.675895,
                            10.811215
                        ],
                        [
                            106.675258,
                            10.810471
                        ],
                        [
                            106.674833,
                            10.810039
                        ],
                        [
                            106.674689,
                            10.809864
                        ],
                        [
                            106.674595,
                            10.809864
                        ],
                        [
                            106.674517,
                            10.809859
                        ],
                        [
                            106.674339,
                            10.809872
                        ],
                        [
                            106.674073,
                            10.809876
                        ],
                        [
                            106.673732,
                            10.809914
                        ],
                        [
                            106.673614,
                            10.809908
                        ],
                        [
                            106.673442,
                            10.809859
                        ],
                        [
                            106.673309,
                            10.809822
                        ],
                        [
                            106.673148,
                            10.809782
                        ],
                        [
                            106.673095,
                            10.809771
                        ],
                        [
                            106.672872,
                            10.809935
                        ],
                        [
                            106.672651,
                            10.810247
                        ],
                        [
                            106.672505,
                            10.810494
                        ],
                        [
                            106.672397,
                            10.810679
                        ],
                        [
                            106.672125,
                            10.810962
                        ],
                        [
                            106.672144,
                            10.811411
                        ],
                        [
                            106.672065,
                            10.811906
                        ],
                        [
                            106.672062,
                            10.811995
                        ],
                        [
                            106.672049,
                            10.812503
                        ],
                        [
                            106.672113,
                            10.812916
                        ],
                        [
                            106.672276,
                            10.81354
                        ],
                        [
                            106.672531,
                            10.814
                        ],
                        [
                            106.672549,
                            10.813974
                        ],
                        [
                            106.672634,
                            10.814023
                        ],
                        [
                            106.672836,
                            10.81416
                        ],
                        [
                            106.673652,
                            10.814609
                        ],
                        [
                            106.673866,
                            10.814664
                        ],
                        [
                            106.673888,
                            10.814638
                        ],
                        [
                            106.673958,
                            10.814624
                        ],
                        [
                            106.674143,
                            10.814674
                        ],
                        [
                            106.674426,
                            10.814693
                        ],
                        [
                            106.674555,
                            10.814727
                        ],
                        [
                            106.674879,
                            10.814984
                        ],
                        [
                            106.674933,
                            10.815009
                        ]
                    ],
                    Name: "Khu vực công viên Gia Định",
                    Description: "Đây là khu vực chính của Công viên Gia Định, bao gồm các khu vực xanh và tiện ích công cộng.",
                    symbol: {
                        type: "simple-fill",
                        color: [147, 112, 219, 0.4],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "polygon",
                    rings: [
                        [106.666827, 10.802622],
                        [106.667009, 10.802566],
                        [106.667086, 10.802669],
                        [106.667142, 10.802720],
                        [106.667198, 10.802763],
                        [106.667253, 10.802790],
                        [106.667313, 10.802817],
                        [106.667382, 10.802832],
                        [106.667455, 10.802841],
                        [106.667591, 10.802834],
                        [106.667675, 10.802812],
                        [106.667756, 10.802784],
                        [106.667873, 10.802715],
                        [106.667928, 10.802666],
                        [106.667976, 10.802614],
                        [106.668041, 10.802507],
                        [106.668081, 10.802367],
                        [106.668102, 10.802215],
                        [106.668098, 10.802144],
                        [106.668123, 10.802136],
                        [106.667837, 10.801218],
                        [106.667813, 10.801226],
                        [106.667775, 10.801165],
                        [106.667673, 10.801051],
                        [106.667560, 10.800958],
                        [106.667505, 10.800928],
                        [106.667445, 10.800904],
                        [106.667377, 10.800888],
                        [106.667303, 10.800878],
                        [106.667237, 10.800880],
                        [106.667166, 10.800886],
                        [106.667084, 10.800907],
                        [106.667003, 10.800936],
                        [106.666885, 10.801004],
                        [106.666830, 10.801053],
                        [106.666781, 10.801106],
                        [106.666747, 10.801159],
                        [106.666717, 10.801213],
                        [106.666695, 10.801280],
                        [106.666675, 10.801352],
                        [106.666673, 10.801481],
                        [106.666490, 10.801535],
                    ],
                    Name: "Khu vực sân vận động Quân Khu 7",
                    Description: "Đây là khu vực sân vận động Quân Khu 7",
                    symbol: {
                        type: "simple-fill",
                        color: [255, 165, 0, 0.4],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "polygon",
                    rings: [
                        [
                            106.646653,
                            10.836675
                        ],
                        [
                            106.649122,
                            10.836615
                        ],
                        [
                            106.649212,
                            10.836613
                        ],
                        [
                            106.651082,
                            10.836568
                        ],
                        [
                            106.651141,
                            10.836542
                        ],
                        [
                            106.651573,
                            10.836446
                        ],
                        [
                            106.652006,
                            10.836545
                        ],
                        [
                            106.652494,
                            10.836533
                        ],
                        [
                            106.652656,
                            10.833656
                        ],
                        [
                            106.652464,
                            10.831005
                        ],
                        [
                            106.653026,
                            10.831051
                        ],
                        [
                            106.655712,
                            10.831636
                        ],
                        [
                            106.655796,
                            10.831644
                        ],
                        [
                            106.656308,
                            10.831651
                        ],
                        [
                            106.65705,
                            10.831616
                        ],
                        [
                            106.657035,
                            10.83141
                        ],
                        [
                            106.657026,
                            10.831276
                        ],
                        [
                            106.65702,
                            10.831199
                        ],
                        [
                            106.657005,
                            10.830995
                        ],
                        [
                            106.65688,
                            10.829768
                        ],
                        [
                            106.656538,
                            10.826282
                        ],
                        [
                            106.656516,
                            10.826242
                        ],
                        [
                            106.656472,
                            10.826196
                        ],
                        [
                            106.656403,
                            10.826164
                        ],
                        [
                            106.656159,
                            10.826079
                        ],
                        [
                            106.64751,
                            10.822763
                        ],
                        [
                            106.64724,
                            10.822661
                        ],
                        [
                            106.647181,
                            10.822643
                        ],
                        [
                            106.647129,
                            10.822638
                        ],
                        [
                            106.647056,
                            10.822651
                        ],
                        [
                            106.646914,
                            10.822699
                        ],
                        [
                            106.646635,
                            10.822809
                        ],
                        [
                            106.646128,
                            10.823015
                        ],
                        [
                            106.642651,
                            10.824429
                        ],
                        [
                            106.644544,
                            10.829059
                        ],
                        [
                            106.64742,
                            10.829687
                        ],
                        [
                            106.647536,
                            10.830091
                        ],
                        [
                            106.647623,
                            10.830059
                        ],
                        [
                            106.647711,
                            10.830026
                        ],
                        [
                            106.647839,
                            10.829999
                        ],
                        [
                            106.648,
                            10.829978
                        ],
                        [
                            106.64818,
                            10.829982
                        ],
                        [
                            106.648405,
                            10.830021
                        ],
                        [
                            106.648652,
                            10.830115
                        ],
                        [
                            106.648908,
                            10.830262
                        ],
                        [
                            106.649004,
                            10.830317
                        ],
                        [
                            106.649036,
                            10.830337
                        ],
                        [
                            106.648994,
                            10.830411
                        ],
                        [
                            106.649069,
                            10.830458
                        ],
                        [
                            106.649006,
                            10.830561
                        ],
                        [
                            106.648971,
                            10.830605
                        ],
                        [
                            106.64897,
                            10.830607
                        ],
                        [
                            106.648923,
                            10.830617
                        ],
                        [
                            106.648634,
                            10.830722
                        ],
                        [
                            106.648117,
                            10.831003
                        ],
                        [
                            106.647034,
                            10.831425
                        ],
                        [
                            106.645395,
                            10.83206
                        ],
                        [
                            106.644803,
                            10.832345
                        ],
                        [
                            106.645846,
                            10.834921
                        ]
                    ],
                    Name: "Khu vực sân Golf Tân Sơn Nhất",
                    Description: "Đây là khu vực sân Golf Tân Sơn Nhất",
                    symbol: {
                        type: "simple-fill",
                        color: [50, 205, 50, 0.4],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "polygon",
                    rings: [
                        [
                            106.663601,
                            10.80245
                        ],
                        [
                            106.663559,
                            10.802438
                        ],
                        [
                            106.663506,
                            10.802387
                        ],
                        [
                            106.663455,
                            10.802323
                        ],
                        [
                            106.663393,
                            10.802251
                        ],
                        [
                            106.663314,
                            10.802158
                        ],
                        [
                            106.66326,
                            10.802095
                        ],
                        [
                            106.663237,
                            10.802069
                        ],
                        [
                            106.663196,
                            10.802021
                        ],
                        [
                            106.663156,
                            10.801974
                        ],
                        [
                            106.663116,
                            10.80193
                        ],
                        [
                            106.66308,
                            10.801904
                        ],
                        [
                            106.663038,
                            10.801864
                        ],
                        [
                            106.662783,
                            10.801618
                        ],
                        [
                            106.662518,
                            10.801363
                        ],
                        [
                            106.66227,
                            10.801094
                        ],
                        [
                            106.662316,
                            10.800934
                        ],
                        [
                            106.662359,
                            10.800779
                        ],
                        [
                            106.662535,
                            10.800762
                        ],
                        [
                            106.662905,
                            10.80073
                        ],
                        [
                            106.663125,
                            10.800711
                        ],
                        [
                            106.663405,
                            10.800686
                        ],
                        [
                            106.6638,
                            10.800653
                        ],
                        [
                            106.664241,
                            10.800614
                        ],
                        [
                            106.664697,
                            10.800574
                        ],
                        [
                            106.665041,
                            10.800544
                        ],
                        [
                            106.66536,
                            10.800516
                        ],
                        [
                            106.665781,
                            10.800479
                        ],
                        [
                            106.666236,
                            10.800438
                        ],
                        [
                            106.666433,
                            10.800421
                        ],
                        [
                            106.666917,
                            10.800378
                        ],
                        [
                            106.666943,
                            10.800487
                        ],
                        [
                            106.666848,
                            10.800552
                        ],
                        [
                            106.666602,
                            10.80072
                        ],
                        [
                            106.666171,
                            10.801017
                        ],
                        [
                            106.665946,
                            10.801166
                        ],
                        [
                            106.665686,
                            10.801301
                        ],
                        [
                            106.665698,
                            10.801325
                        ],
                        [
                            106.66566,
                            10.801546
                        ],
                        [
                            106.665675,
                            10.801553
                        ],
                        [
                            106.66568,
                            10.801565
                        ],
                        [
                            106.665685,
                            10.801579
                        ],
                        [
                            106.665647,
                            10.801627
                        ],
                        [
                            106.665592,
                            10.801695
                        ],
                        [
                            106.665554,
                            10.801742
                        ],
                        [
                            106.665506,
                            10.801809
                        ],
                        [
                            106.665442,
                            10.801903
                        ],
                        [
                            106.665372,
                            10.802006
                        ],
                        [
                            106.665276,
                            10.802169
                        ],
                        [
                            106.665291,
                            10.802178
                        ],
                        [
                            106.665279,
                            10.802206
                        ],
                        [
                            106.665263,
                            10.802197
                        ],
                        [
                            106.665245,
                            10.802233
                        ],
                        [
                            106.665216,
                            10.802289
                        ],
                        [
                            106.665182,
                            10.802355
                        ],
                        [
                            106.665157,
                            10.802403
                        ],
                        [
                            106.665136,
                            10.802451
                        ],
                        [
                            106.665107,
                            10.802513
                        ],
                        [
                            106.665082,
                            10.802567
                        ],
                        [
                            106.665064,
                            10.802608
                        ],
                        [
                            106.665054,
                            10.80263
                        ],
                        [
                            106.665036,
                            10.802677
                        ],
                        [
                            106.665008,
                            10.802751
                        ],
                        [
                            106.664986,
                            10.802811
                        ],
                        [
                            106.664959,
                            10.80288
                        ],
                        [
                            106.664937,
                            10.802941
                        ],
                        [
                            106.664922,
                            10.802989
                        ],
                        [
                            106.6649,
                            10.803059
                        ],
                        [
                            106.664881,
                            10.803122
                        ],
                        [
                            106.664862,
                            10.803185
                        ],
                        [
                            106.664834,
                            10.803292
                        ],
                        [
                            106.664808,
                            10.803391
                        ],
                        [
                            106.664795,
                            10.803439
                        ],
                        [
                            106.66478,
                            10.803505
                        ],
                        [
                            106.664764,
                            10.803579
                        ],
                        [
                            106.664545,
                            10.804561
                        ],
                        [
                            106.664368,
                            10.804556
                        ],
                        [
                            106.66431,
                            10.804234
                        ],
                        [
                            106.664292,
                            10.80418
                        ],
                        [
                            106.664265,
                            10.804089
                        ],
                        [
                            106.664245,
                            10.804023
                        ],
                        [
                            106.664224,
                            10.803952
                        ],
                        [
                            106.664196,
                            10.803859
                        ],
                        [
                            106.664167,
                            10.803759
                        ],
                        [
                            106.664146,
                            10.803689
                        ],
                        [
                            106.66411,
                            10.803592
                        ],
                        [
                            106.664075,
                            10.803502
                        ],
                        [
                            106.664034,
                            10.803402
                        ],
                        [
                            106.663748,
                            10.802795
                        ],
                        [
                            106.663743,
                            10.802757
                        ],
                        [
                            106.663768,
                            10.802717
                        ],
                        [
                            106.663788,
                            10.802686
                        ],
                        [
                            106.663812,
                            10.802655
                        ]
                    ],
                    Name: "Khu vực Công Viên Hoàng Văn Thụ",
                    Description: "Đây là khu vực chính của Công Viên Hoàng Văn Thụ",
                    symbol: {
                        type: "simple-fill",
                        color: [255, 192, 203, 0.4],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "polygon",
                    rings: [
                        [106.665992, 10.802931],
                        [106.666743, 10.802732],
                        [106.666448, 10.801684],
                        [106.666197, 10.801150],
                        [106.665676, 10.801732],
                        [106.665992, 10.802931]
                    ],
                    Name: "Khu vực Bệnh viện Tân Sơn Nhất",
                    Description: "Đây là khu vực chính của Bệnh viện Tân Sơn Nhất",
                    symbol: {
                        type: "simple-fill",
                        color: [0, 255, 255, 0.4],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "polygon",
                    rings: [
                        [
                            106.678877,
                            10.822215
                        ],
                        [
                            106.678966,
                            10.822209
                        ],
                        [
                            106.679256,
                            10.822193
                        ],
                        [
                            106.679274,
                            10.822194
                        ],
                        [
                            106.679502,
                            10.822204
                        ],
                        [
                            106.679603,
                            10.822202
                        ],
                        [
                            106.679704,
                            10.822199
                        ],
                        [
                            106.679796,
                            10.822198
                        ],
                        [
                            106.67988,
                            10.822197
                        ],
                        [
                            106.679935,
                            10.822196
                        ],
                        [
                            106.679989,
                            10.822194
                        ],
                        [
                            106.68006,
                            10.822193
                        ],
                        [
                            106.680139,
                            10.822192
                        ],
                        [
                            106.680198,
                            10.822191
                        ],
                        [
                            106.680249,
                            10.822189
                        ],
                        [
                            106.680295,
                            10.822188
                        ],
                        [
                            106.680367,
                            10.822185
                        ],
                        [
                            106.680437,
                            10.822182
                        ],
                        [
                            106.680503,
                            10.822178
                        ],
                        [
                            106.680561,
                            10.822175
                        ],
                        [
                            106.680624,
                            10.822173
                        ],
                        [
                            106.680703,
                            10.822168
                        ],
                        [
                            106.680728,
                            10.822168
                        ],
                        [
                            106.680835,
                            10.822167
                        ],
                        [
                            106.681019,
                            10.822167
                        ],
                        [
                            106.682503,
                            10.822164
                        ],
                        [
                            106.682619,
                            10.821961
                        ],
                        [
                            106.682828,
                            10.821562
                        ],
                        [
                            106.682542,
                            10.82155
                        ],
                        [
                            106.68235,
                            10.821627
                        ],
                        [
                            106.6823,
                            10.821527
                        ],
                        [
                            106.682321,
                            10.821296
                        ],
                        [
                            106.682286,
                            10.821086
                        ],
                        [
                            106.682321,
                            10.820834
                        ],
                        [
                            106.681827,
                            10.820812
                        ],
                        [
                            106.681842,
                            10.820736
                        ],
                        [
                            106.681836,
                            10.81969
                        ],
                        [
                            106.681817,
                            10.819501
                        ],
                        [
                            106.681935,
                            10.819492
                        ],
                        [
                            106.681929,
                            10.819328
                        ],
                        [
                            106.682482,
                            10.819309
                        ],
                        [
                            106.682624,
                            10.819201
                        ],
                        [
                            106.682406,
                            10.818909
                        ],
                        [
                            106.682295,
                            10.818762
                        ],
                        [
                            106.682166,
                            10.81859
                        ],
                        [
                            106.68183,
                            10.818159
                        ],
                        [
                            106.681721,
                            10.818022
                        ],
                        [
                            106.681508,
                            10.817751
                        ],
                        [
                            106.68131,
                            10.817509
                        ],
                        [
                            106.681213,
                            10.817389
                        ],
                        [
                            106.68067,
                            10.816698
                        ],
                        [
                            106.680497,
                            10.816478
                        ],
                        [
                            106.680098,
                            10.815972
                        ],
                        [
                            106.68001,
                            10.815976
                        ],
                        [
                            106.679772,
                            10.815994
                        ],
                        [
                            106.679095,
                            10.816045
                        ],
                        [
                            106.679074,
                            10.816182
                        ],
                        [
                            106.679075,
                            10.816283
                        ],
                        [
                            106.679114,
                            10.8163
                        ],
                        [
                            106.679339,
                            10.816295
                        ],
                        [
                            106.679387,
                            10.816287
                        ],
                        [
                            106.679393,
                            10.816594
                        ],
                        [
                            106.67942,
                            10.816732
                        ],
                        [
                            106.67875,
                            10.816721
                        ],
                        [
                            106.678759,
                            10.817067
                        ],
                        [
                            106.678766,
                            10.817253
                        ],
                        [
                            106.678771,
                            10.81738
                        ],
                        [
                            106.67879,
                            10.818201
                        ],
                        [
                            106.678793,
                            10.818498
                        ],
                        [
                            106.678797,
                            10.81876
                        ]
                    ],
                    Name: "Khu vực Bệnh viện Quân Y 175",
                    Description: "Đây là khu vực chính của BV Quân Y 175",
                    symbol: {
                        type: "simple-fill",
                        color: [255, 255, 0, 0.4],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                },
                {
                    type: "polygon",
                    rings: [
                        [106.640615, 10.808255],
                        [106.641485, 10.808130],
                        [106.641545, 10.808081],
                        [106.641556, 10.808001],
                        [106.641523, 10.807226],
                        [106.640373, 10.807370],
                        [106.640254, 10.807716],
                        [106.640274, 10.807984],
                        [106.640447, 10.808185],
                        [106.640534, 10.808243],
                        [106.640615, 10.808255]
                    ],
                    Name: "Khu vực sân tập Sunshine",
                    Description: "Đây là khu vực chính của sân tập Sunshine",
                    symbol: {
                        type: "simple-fill",
                        color: [255, 0, 255, 0.4],
                        outline: { color: [255, 255, 255], width: 1 }
                    },
                    popupTemplate: templatePopup
                },
            ],
            "lines": [
                {
                    type: "polyline",
                    paths: [
                        [
    106.64681,
    10.84006
  ],
  [
    106.689451,
    10.822593
  ],
  [
    106.684782,
    10.805799
  ],
  [
    106.671598,
    10.797908
  ],
  [
    106.647085,
    10.800268
  ],
  [
    106.63191,
    10.805866
  ],
  [
    106.6304,
    10.81949
  ],
  [
    106.640905,
    10.826977
  ],
  [
    106.644132,
    10.838307
  ],
  [
    106.646879,
    10.840195
  ]
                    ],
                    Name: "Ranh giới sân bay",
                    Description: "Đây là đường ranh giới bao quanh Sân bay Tân Sơn Nhất.",
                    symbol: {
                        type: "simple-line",
                        color: [50, 205, 50],
                        width: 2.5
                    },
                    popupTemplate: templatePopup
                }
            ]
        };

        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/Graphic",
            "esri/layers/GraphicsLayer"
        ], function (Map, MapView, Graphic, GraphicsLayer) {
            var map = new Map({ basemap: "topo-vector" });
            var view = new MapView({
                container: "viewDiv",
                map: map,
                center: [106.6521, 10.8188],
                zoom: 14
            });

            var graphicsLayer = new GraphicsLayer();
            map.add(graphicsLayer);

            function createGraphic(data) {
                return new Graphic({
                    geometry: data,
                    symbol: data.symbol,
                    attributes: data,
                    popupTemplate: data.popupTemplate
                });
            }

            jsondata.points.forEach(function (data) {
                graphicsLayer.add(createGraphic(data));
            });
            jsondata.polygons.forEach(function (data) {
                graphicsLayer.add(createGraphic(data));
            });
            jsondata.lines.forEach(function (data) {
                graphicsLayer.add(createGraphic(data));
            });

            // Khai báo mảng để lưu trữ các tọa độ được click
            var clickedCoordinates = [];
            var clickedGraphics = []; // Để lưu trữ các graphic điểm đã click

            // --- Thêm layer riêng cho các điểm click vào bản đồ ---
            // Đảm bảo rằng biến 'map' đã được khởi tạo trước khi gọi dòng này
            // Nếu bạn đã có map.add(graphicsLayer); thì hãy thêm dòng này sau đó.
            var clickGraphicsLayer; // Khai báo biến layer ở đây
            require([
                "esri/Graphic",
                "esri/layers/GraphicsLayer"
            ], function (Graphic, GraphicsLayer) {
                clickGraphicsLayer = new GraphicsLayer(); // Khởi tạo GraphicsLayer
                map.add(clickGraphicsLayer); // Thêm layer riêng cho các điểm click vào bản đồ

                // --- Xử lý sự kiện click trên bản đồ ---
                // Đảm bảo rằng biến 'view' đã được khởi tạo trước khi gọi dòng này
                view.on("click", function (event) {
                    var latitude = parseFloat(event.mapPoint.latitude.toFixed(6));
                    var longitude = parseFloat(event.mapPoint.longitude.toFixed(6));
                    var newCoordinate = [longitude, latitude]; // Định dạng [kinh độ, vĩ độ]

                    clickedCoordinates.push(newCoordinate); // Thêm tọa độ vào mảng

                    // Tạo graphic cho điểm mới click
                    var pointGraphic = new Graphic({
                        geometry: {
                            type: "point",
                            longitude: longitude,
                            latitude: latitude
                        },
                        symbol: {
                            type: "simple-marker",
                            color: [255, 69, 0], // Màu đỏ cam nổi bật
                            size: 8,
                            outline: {
                                color: [255, 255, 255],
                                width: 1
                            }
                        },
                        popupTemplate: {
                            title: "Điểm đã chọn",
                            content: `Vĩ độ: ${latitude.toFixed(6)}<br>Kinh độ: ${longitude.toFixed(6)}`
                        }
                    });
                    clickGraphicsLayer.add(pointGraphic); // Thêm vào layer riêng
                    clickedGraphics.push(pointGraphic); // Lưu graphic để có thể xóa sau

                    updateCoordinateOutput(); // Cập nhật hiển thị JSON
                });

                // Hàm để cập nhật nội dung hiển thị JSON (và log ra console)
                function updateCoordinateOutput() {
                    var jsonString = JSON.stringify(clickedCoordinates, null, 2); // Định dạng JSON đẹp hơn

                    // Log ra console
                    console.log("Current Coordinates (JSON):");
                    console.log(jsonString);

                    // Cập nhật hiển thị trên trang HTML (nếu có div output)
                    var outputDiv = document.getElementById("coordinateOutput");
                    if (outputDiv) {
                        outputDiv.textContent = jsonString;
                    } else {
                        console.warn("Element with id 'coordinateOutput' not found. Coordinates will only be logged to console.");
                    }
                }

                // --- Nút để xóa tất cả các điểm đã click và mảng tọa độ ---
                var clearButton = document.getElementById("clearButton");
                if (clearButton) { // Kiểm tra xem nút có tồn tại không
                    clearButton.addEventListener("click", function () {
                        clickedCoordinates = []; // Xóa mảng tọa độ
                        clickGraphicsLayer.removeAll(); // Xóa tất cả graphic trên layer click
                        clickedGraphics = []; // Xóa mảng graphic đã lưu
                        updateCoordinateOutput(); // Cập nhật lại hiển thị (sẽ log mảng rỗng)
                    });
                } else {
                    console.warn("Element with id 'clearButton' not found. Clear functionality will not be available.");
                }
            });
        });
    </script>
</head>

<body>
    <div id="viewDiv"></div>
</body>

</html>
