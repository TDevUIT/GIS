import { Prisma, PrismaClient } from '@prisma/client';
import cuid from 'cuid';

export async function seedTerrains(prisma: PrismaClient) {
  const district1 = await prisma.district.findUnique({ where: { code: 'Q1' } });
  const district3 = await prisma.district.findUnique({ where: { code: 'Q3' } });

  if (!district1 || !district3) {
    console.error('Required districts not found. Skipping terrain seeding.');
    return;
  }

  const terrainsData = [
    {
      districtId: district1.id,
      elevation: 7.2,
      slope: 1.8,
      soilType: 'Đất xám bạc màu phiến sét',
      geom: 'POLYGON((106.69652903631794 10.76171286098205,106.6944690997945 10.762724712717572,106.69309580877888 10.76382088159795,106.69129336432087 10.765001366702773,106.68992007330525 10.766856405381594,106.68871844366657 10.768458475049647,106.68768847540485 10.770229173717933,106.68700182989704 10.771409633713908,106.68906176642048 10.77334895080537,106.69069254950153 10.775119620720007,106.69215167120564 10.776805963337868,106.69378245428669 10.778155030630304,106.69541323736775 10.779841356242377,106.69712985113728 10.781864934503231,106.69790232733357 10.78304534887042,106.69558050968325 10.785079684414093,106.69420721866763 10.786175771909061,106.6924906048981 10.787693424922605,106.69060232975161 10.789042443393347,106.68922903873599 10.790222829590189,106.68751242496646 10.79157183671158,106.68631079532778 10.792752212976627,106.68639662601626 10.794185520780664,106.68536665775454 10.795028639825098,106.68519499637759 10.796377625375726,106.6858816418854 10.796883493395775,106.68639662601626 10.796040379555835,106.68776991703189 10.795028639825098,106.68888571598208 10.795365886780523,106.69017317630923 10.795787444942524,106.69111731388247 10.795703133357437,106.69197562076724 10.795365886780523,106.69257643558657 10.794775704360134,106.69369223453677 10.794775704360134,106.6942930493561 10.794775704360134,106.69446471073306 10.793595336042136,106.69515135624087 10.793089462486648,106.69643881656802 10.793511023842028,106.69772627689517 10.793426711618247,106.69961455204165 10.793258087099755,106.70098784305728 10.793005150144612,106.70218947269595 10.792667900539989,106.70399191715396 10.792583588079701,106.70545103885806 10.79199340019549,106.7063951764313 10.79131889833744,106.7075109753815 10.789716950359013,106.7078542981354 10.788199307558386,106.70914175846255 10.787187541435758,106.71000006534732 10.787356169359265,106.71137335636294 10.787524797188217,106.71243162163128 10.787215799932666,106.71337575920452 10.786878543833668,106.71328992851605 10.786035401931503,106.7123457909428 10.785107943109049,106.71097249992718 10.784180481426752,106.70959920891156 10.783421647014253,106.70874090202679 10.781988287901497,106.70814008720745 10.780301974320459,106.70753927238812 10.778531334889822,106.70745344169964 10.777013635658125,106.70719594963421 10.776254783172597,106.70719594963421 10.774399802377237,106.7068526268803 10.773303671989767,106.70633764274945 10.77035253188417,106.7061659813725 10.769256386765717,106.70470685966839 10.76883479142728,106.70299024589886 10.767991598980364,106.70238943107952 10.767317043323652,106.70170278557171 10.766389526829725,106.7010161400639 10.765630647574676,106.70007200249066 10.765040406832787,106.69895620354046 10.764197203767539,106.69826955803265 10.763775601350243,106.69775457390179 10.763185356975207,106.69723657567728 10.762586228222585,106.69652903631794 10.76171286098205))',
    },
    {
      districtId: district1.id,
      elevation: 6.1,
      slope: 1.2,
      soilType: 'Đất phù sa nước lợ mặn',
      geom: 'POLYGON((106.68707682563038 10.771171435666952,106.68604685736867 10.770117452915434,106.68424441291066 10.768262434315343,106.68179823828908 10.765564205052671,106.6820557303545 10.764299401768463,106.68291403723927 10.762360026423346,106.68338610602589 10.76113737033624,106.68415858222218 10.759155813733551,106.68467356635304 10.757638016889869,106.68527438117238 10.756162373745779,106.6857680374978 10.755255674009632,106.68628302162865 10.754918382120463,106.6866692597268 10.754075150747553,106.68692675179223 10.753527049091195,106.68787088936547 10.754538928294346,106.68864336556176 10.755213512544117,106.68954458779076 10.756141063424167,106.69083204811791 10.757279417423753,106.69199076241235 10.758291284038345,106.69319239205102 10.75896585989509,106.6945227677224 10.75959827339017,106.69550982063988 10.760357167833321,106.69606772011498 10.760863096400852,106.69662561959008 10.761664148229656,106.69430819100121 10.762718160550788,106.69308570303211 10.763890406825633,106.69119742788563 10.76502873156516,106.68982413687 10.766883770075525,106.68862250723133 10.768359360734953,106.68759253896961 10.770256538105476,106.68707682563038 10.771171435666952))',
    },
    {
      districtId: district3.id,
      elevation: 4.8,
      slope: 1.1,
      soilType: 'Đất xám bạc màu phiến sét',
      geom: 'POLYGON((106.6865404858583 10.771283248880302,106.68448054933486 10.773306884672149,106.68327891969619 10.774993237443537,106.68224895143447 10.777016848300903,106.68036067628799 10.778703180290165,106.6642245068544 10.786966070430422,106.66448822115228 10.787806422794052,106.66526069734857 10.788523089340906,106.66478862856195 10.790167200258615,106.66534652803705 10.790125043680721,106.66594734285638 10.789661320933831,106.6666339883642 10.789703477576747,106.66800727937982 10.788860343595436,106.66908016298578 10.788523089340906,106.67079677675531 10.787848579697037,106.67105426882074 10.789492694303082,106.67208423708246 10.789534850969636,106.6721271524267 10.789829947470002,106.67371502016351 10.790040730507213,106.67517414186761 10.790209356830593,106.67637577150629 10.790504452668882,106.67688593751512 10.790675014131905,106.67720780259691 10.790843640099496,106.67756185418688 10.790949031281203,106.67779788858019 10.790938492164702,106.67783007508837 10.790748788004352,106.67842016107164 10.790801483616459,106.67851672059618 10.790917413930568,106.67879567033373 10.790843640099496,106.67932138330065 10.791033344199974,106.67952523118578 10.791012265972496,106.67968616372667 10.791054422425965,106.68029770738207 10.791275743709692,106.68061519897836 10.791328439229423,106.68120528496164 10.791244126393421,106.68169881142038 10.791265204604644,106.68255711830514 10.792055636458317,106.6835227135505 10.792445582073823,106.68437559757183 10.792443995473063,106.68538410816143 10.792254292262847,106.68574888858745 10.792254292262847,106.68600638065288 10.792370222016658,106.68612439784954 10.792507229849862,106.69197646873974 10.787859177618683,106.69599078495389 10.784689375166074,106.69812549616485 10.782887752305792,106.69300105677404 10.77747656156732,106.68940319246934 10.773649409045749,106.68718478740182 10.77125815680158,106.6865404858583 10.771283248880302))',
    },
    {
      districtId: district3.id,
      elevation: 3.9,
      slope: 0.8,
      soilType: 'Đất phù sa nước lợ mặn',
      geom: 'POLYGON((106.68270170779232 10.775977643051542,106.68321669192318 10.775050153228717,106.68446123690609 10.773321641843777,106.686607004118 10.771340165366716,106.68712198824886 10.771255846929568,106.68184340090755 10.76569077789267,106.67871058077816 10.766238857436985,106.67437613101009 10.767714451254935,106.67579233736996 10.769653792138689,106.67750895113949 10.771424483780265,106.67892515749935 10.77281573419548,106.68102800936703 10.774502089717615,106.68270170779232 10.775977643051542))',
    },
  ];

  for (const terrain of terrainsData) {
    await prisma.$executeRaw(Prisma.sql`
            INSERT INTO "public"."terrains" (id, elevation, slope, soil_type, geom, "districtId", "updatedAt")
            VALUES (
                ${cuid()},
                ${terrain.elevation},
                ${terrain.slope},
                ${terrain.soilType},
                ST_GeomFromText(${terrain.geom}, 4326),
                ${terrain.districtId},
                NOW()
            )
        `);
  }
  console.log(`   > Seeded ${terrainsData.length} terrain records.`);
}
