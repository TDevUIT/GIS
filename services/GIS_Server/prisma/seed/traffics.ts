import { Prisma, PrismaClient } from '@prisma/client';
import cuid from 'cuid';

export async function seedTraffics(prisma: PrismaClient) {
  const district1 = await prisma.district.findUnique({ where: { code: 'Q1' } });
  const district3 = await prisma.district.findUnique({ where: { code: 'Q3' } });
  const district4 = await prisma.district.findUnique({ where: { code: 'Q4' } });

  if (!district1 || !district3 || !district4) {
    console.error('Required districts not found. Skipping traffic seeding.');
    return;
  }

  const trafficsData = [
    {
      districtId: district1.id,
      roadName: 'Đường Lê Lợi',
      trafficVolume: 150000,
      lengthKm: 0.9,
      geom: 'LINESTRING(106.69897578736175 10.771961923969592,106.69916890641082 10.772141100200242,106.70016390972033 10.7731923463962,106.70116169147387 10.774256858087345,106.7021242335818 10.775283748412852,106.70295679940541 10.776155039472785,106.7027207650121 10.77639218115858,106.70184636487325 10.775475232271518,106.69881778061654 10.772300174144341,106.69883655607964 10.772168426995881,106.69923084080483 10.77254522368717,106.70039760172631 10.773738849254105,106.70149881972006 10.77488755864835,106.70190077276136 10.775315667299878,106.70197587461378 10.775389444938966,106.70202951879408 10.775349921205995,106.70126758438751 10.774508922550883,106.70029213479692 10.773510712004406,106.69903111937792 10.772210602738777,106.69888899580137 10.772045567350219,106.69888899580137 10.771958614165182,106.69897578736175 10.771961923969592)',
    },
    {
      districtId: district1.id,
      roadName: 'Đường Phan Tôn',
      trafficVolume: 100000,
      lengthKm: 0.4,
      geom: 'LINESTRING(106.6966359 10.7894816,106.6961459 10.7899509,106.6956998 10.7903134,106.6956147 10.7903859,106.695495 10.7904829)',
    },
    {
      districtId: district1.id,
      roadName: 'Đường Nguyễn Huy Tự',
      trafficVolume: 80000,
      lengthKm: 0.5,
      geom: 'LINESTRING(106.69602746285953 10.792712079021518,106.69673824824848 10.792651479451992,106.6973363808588 10.792640940395172)',
    },
    {
      districtId: district1.id,
      roadName: 'Đường Lê Duẩn',
      trafficVolume: 180000,
      lengthKm: 1.3,
      geom: 'LINESTRING(106.69648099918395 10.778222142572659,106.69837727132374 10.780214571959885,106.69852071760224 10.780171889861778,106.6986226415448 10.780245666310524,106.69860654829071 10.780335251973968,106.69869774339722 10.780340521718038,106.69881039617584 10.780337886846022,106.69888013361023 10.780345791462032,106.69886404035614 10.780690959492125,106.69862532375382 10.780409028382664,106.69853681085633 10.780393219153746,106.69852608202027 10.780490709385479,106.6987487053685 10.78071994304914,106.69886404035614 10.780751561471813,106.6996006942061 10.78156028946423,106.70119910818667 10.783213662298337,106.70221703310459 10.784300560187912,106.70235411418379 10.784360127347606,106.703068252334 10.785141026094456,106.70372545323951 10.785825057069452,106.7036561804211 10.785851607029086,106.70226310994717 10.784426164003735,106.70221717711779 10.784300679901891,106.70235430505367 10.784360293090664,106.70372295589482 10.785834744425026,106.70372563810383 10.785874925486755,106.70499238223815 10.787244511484142)',
    },
    {
      districtId: district3.id,
      roadName: 'Đường Hồ Xuân Hương',
      trafficVolume: 120000,
      lengthKm: 0.8,
      geom: 'LINESTRING(106.6880944 10.7771139,106.6869866 10.7759463,106.6891758 10.7782562,106.6880944 10.7771139,106.6869866 10.7759463,106.6863923 10.7752884,106.6863923 10.7752884,106.6863514 10.7752429)',
    },
    {
      districtId: district3.id,
      roadName: 'Đường Cách Mạng Tháng 8',
      trafficVolume: 250000,
      lengthKm: 4.5,
      geom: 'LINESTRING(106.66379093842453 10.787368424401171,106.6665415580912 10.785888967915628,106.67195873602083 10.782978987046825,106.67814537853923 10.779691810079749,106.68136303598952 10.777945039426417,106.68424852274345 10.776402806273895,106.68731870444779 10.774730532756909,106.68947567917806 10.773617983811864)',
    },
    {
      districtId: district3.id,
      roadName: 'Đường Nguyễn Gia Thiều',
      trafficVolume: 50000,
      lengthKm: 0.1,
      geom: 'LINESTRING(106.6901398 10.7785259,106.688964 10.7796331)',
    },
    {
      districtId: district3.id,
      roadName: 'Đường Điện Biên Phủ',
      trafficVolume: 250000,
      lengthKm: 2.5,
      geom: 'LINESTRING(106.69370562737186 10.786506675810879,106.69007778662512 10.782715299585137,106.68606575737303 10.77895819082377,106.68272478510427 10.775897884653654,106.6786566809438 10.772426614931844,106.67600494902707 10.76990743776472,106.67518039660682 10.768853960693676,106.67468687014808 10.768137247309847)',
    },
    {
      districtId: district3.id,
      roadName: 'Đường Hoàng Sa',
      trafficVolume: 100000,
      lengthKm: 2.7,
      geom: 'LINESTRING(106.68653159751308 10.792446964910171,106.68618291034115 10.792064923604464,106.68558523526836 10.7918668504123,106.6849978314941 10.791988049855515,106.6844211565559 10.792122423094147,106.68372314955198 10.792105103372627,106.68323766972028 10.792012886445304,106.68285679604017 10.791794200475996,106.68223300592733 10.79142572177872,106.68199965374303 10.791246557031922,106.68177434818578 10.790943557584814,106.68167428778405 10.790525881897223,106.68161527918572 10.7900911424226,106.68169618715532 10.789522222894515,106.68175787796267 10.78923766526861,106.68187048886304 10.789050692710829,106.68205287907605 10.788924222489772,106.6826563761044 10.78892949208339,106.68317862888638 10.788847130692604,106.6835058583862 10.78862317282155,106.68376066824261 10.78828328349857,106.68387073271943 10.787901830054073,106.6838465928383 10.787525052590766,106.68378346443447 10.786939344123775,106.6835903453854 10.786694306301662,106.68302302445795 10.786490286624494,106.68245171393778 10.786355910868693,106.68213597791282 10.786201123380414,106.68179533736793 10.786014051053531,106.68138930312259 10.785567240405795,106.68116667977435 10.785127224102018,106.68095179084949 10.784635388000686,106.68075062517337 10.784337651565904,106.68054398801459 10.784149385983806,106.68030258920325 10.784054531777118,106.67945769336356 10.784038722739773,106.67918975499619 10.783985728835262,106.67882497457016 10.783901413940486,106.67822415975083 10.78389614425878,106.67796934078693 10.7840548314594,106.67766625116825 10.784357837847837,106.67724782656192 10.784505388674308,106.67657418748757 10.78478476188497,106.67597873708627 10.785211604543269,106.6753843375872 10.785646525870863,106.6750061461161 10.785965339592774,106.67457638250885 10.786328735746112,106.6743510769516 10.786536886419936,106.67414991127548 10.786605391673492,106.6728684819348 10.787031653028187,106.67201668678014 10.787259327742666,106.6706152817968 10.787703195583966,106.6689804630804 10.788251142492497,106.6674484786945 10.788891948994499,106.6665918073872 10.789319237088742,106.66646306135449 10.789537924858475,106.6664469681004 10.789677568772778,106.66651480325841 10.789914936490593,106.66654162534856 10.790154702116071,106.66632168420934 10.790386563198416,106.66609369644307 10.79050776323848,106.66562130759955 10.790611109591852)',
    },
    {
      districtId: district4.id,
      roadName: 'Đường Nguyễn Khoái',
      trafficVolume: 50000,
      lengthKm: 0.8,
      geom: 'LINESTRING(106.69285459396303 10.757883303157271,106.69369016687133 10.75627050962898,106.69509008504544 10.753677006063235,106.69544447098312 10.753025226112536)',
    },
    {
      districtId: district4.id,
      roadName: 'Đường Nguyễn Tất Thành',
      trafficVolume: 150000,
      lengthKm: 2.3,
      geom: 'LINESTRING(106.7057042422378 10.768497385413106,106.70610007674166 10.767687937144132,106.70610007674166 10.76755223550246,106.70645752627432 10.766922433028522,106.70674237394432 10.766282947976851,106.70702008942058 10.765648309059763,106.70734277916591 10.764890453364242,106.70774364928701 10.763990530441097,106.7081924464042 10.76300755536229,106.7084808840534 10.762499317580906,106.70882554791181 10.762287197743497,106.70980581859807 10.76172350304178,106.71074327275853 10.761159474102406,106.71308254435077 10.759797124283308,106.7142194204986 10.759109208255397,106.71557795529009 10.758329463588327,106.71713674724948 10.757492566749258,106.71797817436007 10.757057067883771,106.71842342105654 10.75686207222097)',
    },
    {
      districtId: district4.id,
      roadName: 'Đường Bến Vân Đồn',
      trafficVolume: 60000,
      lengthKm: 1.2,
      geom: 'LINESTRING(106.70570920147087 10.76849844309481,106.70562202967788 10.768530062800961,106.70552010573532 10.768469458361256,106.70543829836036 10.76836405930663,106.70531357564117 10.768258660215139,106.70458163789752 10.767914268877234,106.70354955045745 10.767432428675379,106.7031996009964 10.767160409445816,106.70300514084282 10.766914038027517,106.7026693005877 10.766621224252567,106.70215238128449 10.765892524734928,106.70165275304063 10.765260991330386,106.70143281190141 10.764996173315666,106.70103247043347 10.76468311704899,106.70029366360065 10.764247585854145,106.69972562784662 10.763872842925878,106.69916433845441 10.763652087872954,106.69865630941993 10.7632718644268,106.69829454618947 10.762872268774148,106.6980155321237 10.762504167255761,106.69765335383882 10.76203741128776,106.69718763766292 10.761421457667304,106.69687270490388 10.760998550525423,106.69640057447972 10.760393365751073,106.69598911794257 10.759938157107838,106.6954718328439 10.75957098932826,106.69476268553878 10.75914773136976,106.69388862066225 10.758629436498934,106.69310052852487 10.758138343114101,106.6923470296176 10.7576371409897,106.69167163915401 10.757111956158914,106.69071649006666 10.756313253364176,106.68988789690229 10.755612044512038,106.6890874649306 10.754860675345393,106.68918402445513 10.754871215724663,106.68948911314536 10.755159424071916,106.68984878294798 10.755465586564979,106.69063605420828 10.756143962057585,106.69150577666558 10.756850218166502,106.69230841983426 10.757506732873871,106.69302349606525 10.757980679309199,106.69391272561573 10.75852582867996,106.69481261454638 10.759082658111115,106.69585654083835 10.759749204158831,106.69613619536908 10.759991589204809,106.6964835414365 10.760357860936299,106.6969307449702 10.760881681409519,106.6972541457719 10.761325040263968,106.6976174596759 10.761834866272162,106.6980561614839 10.762409041007224,106.69844650282455 10.762925301181525,106.69885482296952 10.763331371502613,106.69911866046573 10.763544499877726,106.69935335375453 10.763632773000346,106.6998018523275 10.76379635081704,106.70010482095364 10.763929811886829,106.70044143818501 10.76415115311621,106.70081601599442 10.764390926915206,106.70113600340368 10.764636328604926,106.70151486906197 10.764950153120155,106.701897210636 10.76534171078712,106.70221284035831 10.765710813361622,106.70261025248497 10.766242516755067,106.70291079169412 10.76664982467868,106.70304221993585 10.76679606668914,106.70332178812278 10.767161783298928,106.70361678918236 10.767359645517956,106.70387428124779 10.76748085483169,106.70419631303214 10.767642022680008,106.7047460891065 10.767896537618604,106.70524305565077 10.76816263089176,106.7053932593556 10.768225870371252)',
    },
  ];

  for (const data of trafficsData) {
    await prisma.$executeRaw(Prisma.sql`
            INSERT INTO "public"."traffics" (id, road_name, traffic_volume, length_km, geom, "districtId", "createdAt", "updatedAt")
            VALUES (
                ${cuid()},
                ${data.roadName},
                ${data.trafficVolume},
                ${data.lengthKm},
                ST_GeomFromText(${data.geom}, 4326),
                ${data.districtId},
                NOW(),
                NOW()
            )
        `);
  }
  console.log(`   > Seeded ${trafficsData.length} traffic records.`);
}
